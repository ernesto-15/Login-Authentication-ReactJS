(this.webpackJsonploginauth=this.webpackJsonploginauth||[]).push([[0],{16:function(e,t,n){e.exports=n.p+"static/media/logo.0e4fdce8.png"},27:function(e,t,n){e.exports=n(40)},32:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(22),c=n.n(o),l=(n(32),n(11)),i=n.n(l),u=n(15),s=n(8),m=n(6),d=n(1),p=n(26),f=Object(a.createContext)();function h(){return Object(a.useContext)(f)}var b=function(e){var t=e.component,n=Object(p.a)(e,["component"]),a=h().isValidated;return r.a.createElement(d.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(d.a,{to:{pathname:"/login",state:{referer:e.location}}})}}))};var g=function(e){return r.a.createElement("div",null,"Home Page")},v=n(9),E=n(10);function k(){var e=Object(v.a)(["\n  background-color: red;\n"]);return k=function(){return e},e}function O(){var e=Object(v.a)(["\n  width: 50%;\n  margin-bottom: 1rem;\n"]);return O=function(){return e},e}function w(){var e=Object(v.a)(["\n  background: linear-gradient(to bottom, #6371c7, #5563c1);\n  border-color: #3f4eae;\n  border-radius: 3px;\n  padding: 1rem;\n  color: white;\n  font-weight: 700;\n  width: 100%;\n  margin-bottom: 1rem;\n  font-size: 0.8rem;\n"]);return w=function(){return e},e}function j(){var e=Object(v.a)(["\n  padding: 1rem;\n  border: 1px solid #999;\n  margin-bottom: 1rem;\n  font-size: 0.8rem;\n"]);return j=function(){return e},e}function x(){var e=Object(v.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n"]);return x=function(){return e},e}function y(){var e=Object(v.a)(["\n  box-sizing: border-box;\n  max-width: 410px;\n  margin: 0 auto;\n  padding: 0 2rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return y=function(){return e},e}var S=E.a.div(y()),T=E.a.div(x()),A=E.a.input(j()),C=E.a.button(w()),P=E.a.img(O()),I=E.a.div(k());var J=function(e){var t=h().setAuthTokens;return r.a.createElement("div",null,r.a.createElement("div",null,"Admin Page"),r.a.createElement(C,{onClick:function(){t(null,!0)}},"Log Out"))},z=n(16),B=n.n(z);var N=function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),o=n[0],c=n[1],l=Object(a.useState)(""),p=Object(s.a)(l,2),f=p[0],b=p[1],g=Object(a.useState)(""),v=Object(s.a)(g,2),E=v[0],k=v[1],O=h(),w=O.setAuthTokens,j=O.isValidated,x=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://puckllay-back.herokuapp.com/login/teacher",{method:"POST",mode:"cors",body:JSON.stringify({email:f,password:E}),headers:{"Content-Type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,a=n.ok,r=n.data,a?(console.log("object"),w(r.token,!1)):c(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),c(!0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return j?r.a.createElement(d.a,{to:"/admin"}):r.a.createElement(S,null,r.a.createElement(P,{src:B.a}),r.a.createElement(T,null,r.a.createElement(A,{type:"email",value:f,onChange:function(e){b(e.target.value)},placeholder:"email"}),r.a.createElement(A,{type:"password",value:E,onChange:function(e){k(e.target.value)},placeholder:"password"}),r.a.createElement(C,{onClick:x},"Sign In")),r.a.createElement(m.b,{to:"/signup"},"Don't have an account?"),o&&r.a.createElement(I,null,"The username or password provided were incorrect!"))};var V=function(){return r.a.createElement(S,null,r.a.createElement(P,{src:B.a}),r.a.createElement(T,null,r.a.createElement(A,{type:"email",placeholder:"email"}),r.a.createElement(A,{type:"password",placeholder:"password"}),r.a.createElement(A,{type:"password",placeholder:"password again"}),r.a.createElement(C,null,"Sign Up")),r.a.createElement(m.b,{to:"/login"},"Already have an account?"))};var H=function(e){var t=JSON.parse(localStorage.getItem("tokens")),n=Object(a.useState)(t),o=Object(s.a)(n,2),c=o[0],l=o[1],p=Object(a.useState)(t),h=Object(s.a)(p,2),v=h[0],E=h[1],k=function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://puckllay-back.herokuapp.com/token/validation",{method:"POST",mode:"cors",headers:{Authorization:"Bearer ".concat(t)}});case 2:return n=e.sent,E(n.ok),e.abrupt("return",n.ok);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){k(c)}),[c]),r.a.createElement(f.Provider,{value:{authTokens:c,setAuthTokens:function(e,t){k(e)&&(t?(localStorage.removeItem("tokens"),l(null)):(localStorage.setItem("tokens",JSON.stringify(e)),l(e)))},isValidated:v}},r.a.createElement(m.a,null,r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(m.b,{to:"/"},"Home Page")),r.a.createElement("li",null,r.a.createElement(m.b,{to:"/admin"},"Admin Page"))),r.a.createElement(d.b,{exact:!0,path:"/",component:g}),r.a.createElement(d.b,{exact:!0,path:"/login",component:N}),r.a.createElement(d.b,{exact:!0,path:"/signup",component:V}),r.a.createElement(b,{exact:!0,path:"/admin",component:J}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.f3c615c6.chunk.js.map